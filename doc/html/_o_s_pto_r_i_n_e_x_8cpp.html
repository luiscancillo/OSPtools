<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Tools to acquire and process OSP data from SiRF receivers: OSPtoRINEX.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tools to acquire and process OSP data from SiRF receivers
   </div>
   <div id="projectbrief">A set of line commands to adquiere and process binary OSP files obtained with SiRF GPS receivers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">OSPtoRINEX.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;ArgParser.h&quot;</code><br />
<code>#include &quot;Logger.h&quot;</code><br />
<code>#include &quot;Utilities.h&quot;</code><br />
<code>#include &quot;GNSSdataFromOSP.h&quot;</code><br />
<code>#include &quot;RinexData.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_o_s_pto_r_i_n_e_x_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca7a016d4339bc3e9d9c3c3366b215c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_o_s_pto_r_i_n_e_x_8cpp.html#a2ca7a016d4339bc3e9d9c3c3366b215c">generateRINEX</a> (FILE *inFile, Logger *plog)</td></tr>
<tr class="separator:a2ca7a016d4339bc3e9d9c3c3366b215c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3156ae88c8c59a6523e943b7468a0061"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_o_s_pto_r_i_n_e_x_8cpp.html#a3156ae88c8c59a6523e943b7468a0061">prinfNavFile</a> (RinexData &amp;rinex, RinexData::RINEXversion ver, char sysId, Logger *plog)</td></tr>
<tr class="separator:a3156ae88c8c59a6523e943b7468a0061"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains the command line program to generate RINEX files from an OSP data file containing SiRF IV receiver messages. </p>
<p>Usage: </p>
<p>OSPtoRINEX.exe {options} [OSPfilename] </p>
<p>Options are:</p><ul>
<li>-a or &ndash;aend : Append end-of-file comment lines to Rinex file. Default value FALSE</li>
<li>-b or &ndash;bias : Apply receiver clock bias to measurements and time. Default value TRUE</li>
<li>-c or &ndash;glo50bps : Use MID8 GLONASS 50bps data to generate GLONASS navigation file, instead of MID70. Default value FALSE</li>
<li>-d or &ndash;gps50bps : Use MID8 GPS 50bps data to generate nav file, instead of MID15. Default value FALSE</li>
<li>-h or &ndash;help : Show usage data and stops. Default value HELP=FALSE</li>
<li>-i MINSV or &ndash;minsv=MINSV : Minimun satellites in a fix to acquire observations. Default value MINSV = 4</li>
<li>-j ANTN or &ndash;antnum=ANTN : Receiver antenna number. Default value ANTN = Antenna#</li>
<li>-k ANTT or &ndash;antype=ANTT : Receiver antenna type. Default value ANTT = AntennaType</li>
<li>-l LOGLEVEL or &ndash;llevel=LOGLEVEL : Maximum level to log (SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST). Default value LOGLEVEL = INFO</li>
<li>-m MRKNAM or &ndash;mrkname=MRKNAM : Marker name. Default value MRKNAM = MRKNAM</li>
<li>-n or &ndash;nav : Generate RINEX navigation file. Default value FALSE</li>
<li>-o OBSERVER or &ndash;observer=OBSERVER : Observer name. Default value OBSERVER = OBSERVER</li>
<li>-p PGM or &ndash;program=PGM : Program used to generate RINEX file. Default value OSPtoRINEX</li>
<li>-q RUNBY or &ndash;runby=RUNBY : Who runs the RINEX file generator. Default value RUNBY = RUNBY</li>
<li>-r RINEX or &ndash;rinex=RINEX : RINEX file name prefix. Default value RINEX = PNT1</li>
<li>-s SYSLST or &ndash;selsys=SYSLST : List of additional systems to GPS (R or S or R,S) to be included in the RINEX files. Default value an empty list</li>
<li>-u MRKNUM or &ndash;mrknum=MRKNUM : Marker number. Default value MRKNUM = MRKNUM</li>
<li>-v VER or &ndash;ver=VER : RINEX version to generate (V210, V304). Default value VER = V210</li>
<li>-y AGENCY or &ndash;agency=AGENCY : Agency name. Default value AGENCY = AGENCY Default value for operator is: DATA.OSP </li>
</ul>
<p>Copyright 2015, 2021 by Francisco Cancillo &amp; Luis Cancillo </p>
<p>This file is part of the OSPtoRINEX tools. </p>
<p>RXtoRINEX is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. </p>
<p>RXtoRINEX is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied </p>
<p>warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. </p>
<p>A copy of the GNU General Public License can be found at <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<p>Ver. |Date |Reason for change </p>
<p>---&mdash;+----&mdash;+---------------&mdash; </p>
<p>V1.0 |2/2015 |First release </p>
<p>V2.0 |3/2016 |Removed option to allow selection for GPS and SBAS of observables to include. </p>
<p>|Removed option to generate or not observation file. </p>
<p>|Added capability to generate GLONASS navigation files </p>
<p>|Added capability to generate multiple navigation files in V2.10 </p>
<p>V2.1 |2/2018 |Reviewed to run on Linux </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2ca7a016d4339bc3e9d9c3c3366b215c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int generateRINEX </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>inFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Logger *&#160;</td>
          <td class="paramname"><em>plog</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>generateRINEX iterates over the input OSP file processing GNSS receiver messages to extract RINEX data and print them.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inFile</td><td>is the FILE containing the binary OSP messages </td></tr>
    <tr><td class="paramname">plog</td><td>point to the Logger </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of epochs read in the inFile </dd></dl>
<p>The generateRINEX process sequence follows:</p>
<p>1- Setups the RinexData object members with data given in command line options</p>
<p>2- Setups the GNSSdataFromOSP object used to extract message data from the OSP file</p>
<p>3- Starts data acquisition extracting RINEX header data located in the binary file</p>
<p>4- For the observation RINEX file, generate the filename in standard format, create it, print header,</p>
<p>and iterate over the binary OSP file extracting epoch by epoch data and printing them</p>
<p>5- If navigation RINEX file requested, generate the filename in standard format, create it, print header, </p>

</div>
</div>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>main gets the command line arguments, sets parameters accordingly and triggers the data acquisition to generate RINEX files. Input data are contained in a OSP binary file containing receiver messages (see SiRF IV ICD for details). The output is a RINEX observation data file, and optionally a RINEX navigation data file. A detailed definition of the RINEX format can be found in the document "RINEX: The Receiver Independent Exchange
 Format Version 2.10" from Werner Gurtner; Astronomical Institute; University of Berne. An updated document exists also for Version 3.00.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>the number of arguments passed from the command line </td></tr>
    <tr><td class="paramname">argv</td><td>the array of arguments passed from the command line </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the exit status according to the following values and meaning::<ul>
<li>(0) no errors have been detected</li>
<li>(1) an error has been detected in arguments</li>
<li>(2) error when opening the input file</li>
<li>(3) error when creating output files or no epoch data exist </li>
</ul>
</dd></dl>
<p>The main process sequence follows:</p>
<p>1- Defines and sets the error logger object</p>
<p>2- Setups the valid options in the command line. They will be used by the argument/option parser</p>
<p>3- Setups the default values for operators in the command line</p>
<p>4- Parses arguments in the command line extracting options and operators</p>
<p>5- Sets logging level stated in option</p>
<p>6- Opens the OSP binary file</p>
<p>7- Calls generateRINEX to generate RINEX files extracting data from messages in the binary OSP file </p>

</div>
</div>
<a class="anchor" id="a3156ae88c8c59a6523e943b7468a0061"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prinfNavFile </td>
          <td>(</td>
          <td class="paramtype">RinexData &amp;&#160;</td>
          <td class="paramname"><em>rinex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RinexData::RINEXversion&#160;</td>
          <td class="paramname"><em>ver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>sysId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Logger *&#160;</td>
          <td class="paramname"><em>plog</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>prinfNavFile prints a RINEX navigation file from the navigation data stored stored in the given RinexData object. File format will be according the given version, and for the given satellite system if version to be generated is 2.10.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rinex</td><td>is the RinexData object containing navigation data for the file to be printed </td></tr>
    <tr><td class="paramname">ver</td><td>is the RINEX version of the file to be generated </td></tr>
    <tr><td class="paramname">sysId</td><td>is the identification of the satellite system data to be printed. Only relevant for version 2.10 files. </td></tr>
    <tr><td class="paramname">plog</td><td>a pointer to the Logger object where logging messages will be printed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
